<div id="ContentPane" class="container-fluid">
  <div class="listing-preview well well-sm clearfix">
    <div class="image" ng-style="{'background-image':'url(' + ssc.sale.listingId.images[0].url  + ')'}"></div>
    <div class="name"><strong ng-bind='ssc.sale.listingId.title'></strong></div>
    <div class="category small"><span ng-bind="ssc.sale.listingId.categories[0].name"></span>
      <i class="fa fa-angle-right"></i> <span ng-bind="ssc.sale.listingId.categories[1].name"></span>
      <i class="fa fa-angle-right"></i> <span ng-bind="ssc.sale.listingId.categories[2].name"></span>
    </div>
    <div class="price small text-muted"><em><span ng-bind='ssc.sale.total*0.01|currency:"$"'></span></em></div>
  </div>
  <label for="sellerAddress" class="control-label small">Seller Address</label>
  <form class="" novalidate ng-hide="ssc.sale.addresses.shipping.seller">
    <div class="form-group">
      <label class="col-sm-4 control-label" for='savedAddresses'>Saved Addresses</label>
      <div class="col-sm-8">
	<select cordova-keyboard class="form-control" name="savedAddresses" data-ng-model="ssc.selectedSellerAddress" data-ng-options="address.line1 for address in (ssc.sellerAddresses|filter:{shippoId:'!!'}) track by address._id" ng-show='!ssc.sale.addresses.shipping.seller' ng-change='ssc.addressChanged(ssc.selectedSellerAddress)'>
	  <option value="">New Address&hellip;</option>
	</select>
      </div>
    </div>
  </form>
  <div ng-hide="ssc.sale.addresses.shipping.seller" ng-show="!ssc.sellerAddress.addressId">
    <form class="" name='sellerAddressForm' id='sellerAddressForm' novalidate>
      <div class="form-group">
	<label class="col-sm-4 control-label">Name</label>
	<div class="col-sm-8">
	  <input name='name' id='name' class="form-control" type="text" cordova-keyboard placeholder="First and Last Name" ng-hide='ssc.sale.addresses.shipping.seller' ng-minlength='8' ng-maxlength='24' ng-required='true' ng-model="ssc.sellerAddress.contact" ng-disabled='ssc.selectedSellerAddress' cordova-keyboard/>
	</div>
	<div ng-messages='sellerAddressForm.name.$error' ng-show='ssc.address.name.$touched' class="col-sm-9 col-sm-offset-3 small">
	  <div ng-message='required' class='alert alert-danger rt-alert'>Name cannot be blank.</div>
	  <div ng-message='minlength' class='alert alert-danger rt-alert'>Name must be at least 8 characters in length.</div>
	  <div ng-message='maxlength' class='alert alert-danger rt-alert'>Name cannot be over 24 characters in length.</div>
	</div>
      </div>
      <div class="form-group">
	<label class="col-sm-4 control-label">Address</label>
	<div class="col-sm-8">
	  <input name='address1' id='address1' class='form-control' type='text' cordova-keyboard ng-hide='ssc.sale.addresses.shipping.seller' ng-minlength='12' ng-maxlength='32' ng-required='true' ng-model='ssc.sellerAddress.line1' ng-disabled='ssc.selectedSellerAddress' cordova-keyboard />
	</div>
	<div ng-messages='sellerAddressForm.address1.$error' ng-show='sellerAddressForm.address1.$touched' class="col-sm-9 col-sm-offset-3 small">
	  <div ng-message='required' class='alert alert-danger rt-alert'>Address cannot be blank.</div>
	  <div ng-message='minlength' class='alert alert-danger rt-alert'>Address must be at least 12 characters in length.</div>
	  <div ng-message='maxlength' class='alert alert-danger rt-alert'>Address cannot be over 32 characters in length.</div>
	</div>
      </div>
      <div class="form-group">
	<label class="col-sm-4 control-label">Apt / Suite</label>
	<div class="col-sm-8">
	  <input class="form-control" ng-model="ssc.sellerAddress.line2" ng-hide='ssc.sale.addresses.shipping.seller' ng-disabled="ssc.selectedSellerAddress" type="text" cordova-keyboard placeholder="(Optional)" cordova-keyboard />
	</div>
      </div>
      <div class="form-group">
	<label class="col-sm-4 control-label">City</label>
	<div class="col-sm-8">
	  <input name='city' id='city' class="form-control" type="text" cordova-keyboard ng-hide='ssc.sale.addresses.shipping.seller' ng-disabled="ssc.selectedSellerAddress" ng-minlength='3' ng-maxlength='24' ng-required='true' ng-model="ssc.sellerAddress.city" cordova-keyboard />
	</div>
	<div ng-messages='sellerAddressForm.city.$error' ng-show='sellerAddressForm.city.$touched' class="col-sm-9 col-sm-offset-3 small">
	  <div ng-message='required' class='alert alert-danger rt-alert'>City cannot be blank.</div>
	  <div ng-message='minlength' class='alert alert-danger rt-alert'>City must be at least 3 characters in length.</div>
	  <div ng-message='maxlength' class='alert alert-danger rt-alert'>City cannot be over 24 characters in length.</div>
	</div>
      </div>
      <div class="form-group">
	<label class="col-sm-4 control-label">State</label>
	<div class="col-sm-8">
	  <select cordova-keyboard ng-model="ssc.sellerAddress.state" ng-hide='ssc.sale.addresses.shipping.seller' ng-disabled="ssc.selectedSellerAddress" class="form-control" ng-required='true'>
	    <option value="AL">AL</option><option value="AK">AK</option><option value="AZ">AZ</option>
	    <option value="AR">AR</option><option value="CA">CA</option><option value="CO">CO</option>
	    <option value="CT">CT</option><option value="DE">DE</option><option value="DC">DC</option>
	    <option value="FL">FL</option><option value="GA">GA</option><option value="HI">HI</option>
	    <option value="ID">ID</option><option value="IL">IL</option><option value="IN">IN</option>
	    <option value="IA">IA</option><option value="KS">KS</option><option value="KY">KY</option>
	    <option value="LA">LA</option><option value="ME">ME</option><option value="MD">MD</option>
	    <option value="MA">MA</option><option value="MI">MI</option><option value="MN">MN</option>
	    <option value="MS">MS</option><option value="MO">MO</option><option value="MT">MT</option>
	    <option value="NE">NE</option><option value="NV">NV</option><option value="NH">NH</option>
	    <option value="NJ">NJ</option><option value="NM">NM</option><option value="NY">NY</option>
	    <option value="NC">NC</option><option value="ND">ND</option><option value="OH">OH</option>
	    <option value="OK">OK</option><option value="OR">OR</option><option value="PA">PA</option>
	    <option value="RI">RI</option><option value="SC">SC</option><option value="SD">SD</option>
	    <option value="TN">TN</option><option value="TX">TX</option><option value="UT">UT</option>
	    <option value="VT">VT</option><option value="VA">VA</option><option value="WA">WA</option>
	    <option value="WV">WV</option><option value="WI">WI</option><option value="WY">WY</option>
	  </select>
	  <p class="form-control-static" ng-show='ssc.sale.addresses.shipping.seller' ng-show='ssc.sale.addresses.shipping.seller'><span data-ng-bind="ssc.sellerAddress.state"></span></p>
	</div>
      </div>
      <div class="form-group">
	<label class="col-sm-4 control-label">Zip Code</label>
	<div class="col-sm-8">
	  <input name='zip' id='zip' class="form-control" type="text" cordova-keyboard ng-hide='ssc.sale.addresses.shipping.seller' ng-disabled="ssc.selectedSellerAddress" ng-model="ssc.sellerAddress.zipCode" ng-minlength='5' ng-maxlength='10' ng-required='true' cordova-keyboard />
	</div>
	<div ng-messages='sellerAddressForm.zip.$error' ng-show='sellerAddressForm.zip.$touched' class="col-sm-9 col-sm-offset-3 small">
	  <div ng-message='required' class='alert alert-danger rt-alert'>Zip code cannot be blank.</div>
	  <div ng-message='minlength' class='alert alert-danger rt-alert'>Zip code must be at least 5 characters in length.</div>
	  <div ng-message='maxlength' class='alert alert-danger rt-alert'>Zip code cannot be over 10 characters in length.</div>
	</div>
      </div>
      <div class="form-group">
	<label class="col-sm-4 control-label">Phone</label>
	<div class="col-sm-8">
	  <input name='phone' id='phone' class="form-control" ng-minlength='10' ng-maxlength='24' ng-required='true' ng-model="ssc.sellerAddress.phone" ng-hide='ssc.sale.addresses.shipping.seller' ng-disabled="ssc.selectedSellerAddress" type="text" cordova-keyboard />
	</div>
	<div ng-messages='sellerAddressForm.phone.$error' ng-show='sellerAddressForm.phone.$touched' class="col-sm-9 col-sm-offset-3 small">
	  <div ng-message='required' class='alert alert-danger rt-alert'>Phone cannot be blank.</div>
	  <div ng-message='minlength' class='alert alert-danger rt-alert'>Phone must be at least 10 characters in length.</div>
	  <div ng-message='maxlength' class='alert alert-danger rt-alert'>Phone cannot be over 24 characters in length.</div>
	</div>
      </div>
      <div class="form-group">
	<label class="col-sm-4 control-label">Email</label>
	<div class="col-sm-8">
	  <input name='email' id='email' class="form-control" ng-minlength='10' ng-maxlength='64' ng-required='true' ng-model="ssc.sellerAddress.email" ng-hide='ssc.sale.addresses.shipping.seller' ng-disabled="ssc.selectedSellerAddress" type="text" cordova-keyboard />
	</div>
	<div ng-messages='sellerAddressForm.email.$error' ng-show='sellerAddressForm.email.$touched' class="col-sm-9 col-sm-offset-3 small">
	  <div ng-message='required' class='alert alert-danger rt-alert'>Email cannot be blank.</div>
	  <div ng-message='minlength' class='alert alert-danger rt-alert'>Email must be at least 10 characters in length.</div>
	  <div ng-message='maxlength' class='alert alert-danger rt-alert'>Email cannot be over 24 characters in length.</div>
	</div>
      </div>
      <div class="form-group">
	<div class="col-sm-8 col-sm-offset-4">
	  <button class="btn btn-warning" ng-show='(sellerAddressForm.$valid || ssc.selectedSellerAddress) && !ssc.sale.addresses.shipping.seller' ng-click="ssc.saveAddress()">Save Address</button>
	</div>
      </div>
      <div class="form-group" ng-show='ssc.validateSellerMessage'>
	<div class="col-sm-8 col-sm-offset-4">
	  <div class="alert alert-warning" ng-bind='ssc.validateSellerMessage'></div>
	</div>
      </div>
    </form>
  </div>
  <hr class="spacer spacer-xs">
  <pre class="small" ng-show='ssc.sale.addresses.shipping.seller'><strong><span data-ng-bind="ssc.sellerAddress.contact" ></span></strong><br>
    <span data-ng-bind="ssc.sellerAddress.line1"></span>,  <p ng-show='ssc.sellerAddress.line2'><span data-ng-bind="ssc.sellerAddress.line2"></span></p> <br />
    <span data-ng-bind="ssc.sellerAddress.city"></span>, <span data-ng-bind="ssc.sellerAddress.state"></span> <span data-ng-bind="ssc.sellerAddress.zipCode"></span></pre>
  <div class="form-group">
    <label for="sellerAddress" class="control-label small">Buyer Address</label>
    <pre class="small"><strong><span ng-bind="ssc.sale.addresses.shipping.buyer.contact"></span></strong>
      <span data-ng-bind="ssc.sale.addresses.shipping.buyer.line1"></span>, <p ng-show="ssc.sale.addresses.shipping.buyer.line2"><span data-ng-bind="ssc.sale.addresses.shipping.buyer.line2"></span></p>
      <span data-ng-bind="ssc.sale.addresses.shipping.buyer.city"></span>, <span data-ng-bind="ssc.sale.addresses.shipping.buyer.state"></span> <span data-ng-bind="ssc.sale.addresses.shipping.buyer.zipCode"></span>
    </pre>
  </div>
  <fieldset>
    <legend>Tracking Numbers</legend>
    <div class="alert alert-warning" role="alert" ng-show="ssc.trackingNumbers.length===0">
      <strong>No tracking numbers.</strong> To manually create a tracking number, click on Add Tracking button below.
    </div>
    <div class="tracking-number-list list-group stretch" ng-show="ssc.trackingNumbers.length > 0 || ssc.isAddingTrackingNumber">
      <div href="" class="tracking-number-item list-group-item" ng-repeat="trackingNum in ssc.trackingNumbers">
	<div class="number small"><b><span ng-bind="trackingNum.tracking_number"></span></b></div>
	<div class="summary smaller">
	  <b><span data-ng-bind="trackingNum.carrier"></span></b> &bull;
	  <i><span class="text-muted" data-ng-bind="trackingNum.status"></span></i>
	</div>
	<div class="quick-actions" ng-show="false">
          <div class="wrapper">
	    <button class="btn btn-danger btn-sm" ng-click='ssc.refundLabel(trackingNum)'>Void Label</button>
          </div>
	</div>
      </div>
    </div>
    <div class="well well-sm" ng-show='ssc.sale.addresses.shipping.seller'>
      <div class="" ng-show="ssc.isAddingTrackingNumber" novalidate>
	<div class="form-group" >
  	  <label for="trackingNumber" class="control-label small">Tracking Number</label>
  	  <input name="trackingNumber" type="text" class="form-control input-sm" ng-model="tracking.tracking_number" placeholder="Tracking #" cordova-keyboard />
	  <div class="form-alert" ng-messages="shippingEdit.trackingNumber.$error" ng-show="shippingEdit.trackingNumber.$touched && shippingEdit.trackingNumber.$error">
  	    <div ng-message="required" class="smaller text-danger"><i class="fa fa-fw fa-exclamation-triangle"></i> Tracking Number required.</div>
	  </div>
        </div>
        <div class="form-group">
  	  <label for="carrier" class="control-label small">Carrier</label>
  	  <select name="carrier" class="form-control input-sm" ng-required="true" ng-model="tracking.carrier"  ng-options="carrier.id as carrier.text for carrier in ssc.carriers">
  	    <option value="">(Choose a carrier)</option>
  	  </select>
	  <div class="form-alert" ng-messages="shippingEdit.carrier.$error" ng-show="shippingEdit.carrier.$touched && shippingEdit.carrier.$error">
  	    <div ng-message="required" class="smaller text-danger"><i class="fa fa-fw fa-exclamation-triangle"></i> Carrier required.</div>
	  </div>
  	</div>
	<div class="form-group col-sm-12">
	  <button type="button" class="btn btn-primary" ng-click="ssc.saveTrackingNumber(tracking)" title="Save">
	    <span class="glyphicon glyphicon-ok" aria-hidden="true"></span>
	  </button>
	  <button type="button" class="btn btn-warning" ng-click="ssc.cancelTrackingNumber()" title="Cancel">
	    <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
	  </button>
	  <span data-ng-bind='ssc.manualMessage'></span>
	</div>
      </div>
      <button class="btn btn-primary btn-sm" ng-click="ssc.addTrackingNumber()">Add Tracking Number</button>
    </div>
  </fieldset>
  <hr class="spacer">
  <div class="text-center text-uppercase text-muted" style="font-size: 1.25em" ng-show='ssc.sale.addresses.shipping.seller'>&mdash; or &mdash;</div>
  <hr class="spacer">
  <div ng-show='ssc.sale.addresses.shipping.seller'>
    <legend>Shipping Labels</legend>
    <div class="shipping-label-list list-group stretch"  ng-show='ssc.sale.addresses.shipping.seller'>
      <div href="" class="shipping-label-item list-group-item"  ng-repeat="label in ssc.shippingLabels">
	<div class="shipping-label small"><b><span ng-bind="label.option.servicelevel_name"></span></b></div>
	<div class="summary smaller">
	  <b class="cost">$<span ng-bind="label.option.amount"></span></b>
	</div>
	<div class="quick-actions" ng-show="false">
          <div class="wrapper">
	    <!-- button class="btn btn-info btn-sm">Shipping <i class="fa fa-file-o"></i></button>
		 <button class="btn btn-primary btn-sm">Return <i class="fa fa-file-o"></i></button -->
	    <button class="btn btn-danger btn-sm" ng-click="ssc.removeShippingLabel(label)">Delete</button>
          </div>
	</div>
      </div>
      <div class="shipping-label-item list-group-item" style="text-align: center" ng-show="ssc.getShippingLabelTotalAmount()>0">
	<div class="shipping-label small"><b>Sum</b></div>
	<b><strong ng-bind="ssc.getShippingLabelTotalAmount()|currency:'$'"></strong></b>
      </div>
    </div>
    <div id="ContentPane" class="container-fluid" ng-show="ssc.isAddingShipping">
      <form id="ShippingLabelEdit" name="shippingLabelEdit" class="no-bottom-nav">
	<div class="form-group">
	  <label for="carrier" class="control-label small">Carrier</label>
	  <select name="carrier" class="form-control input-sm" ng-required="true" ng-model="ssc.selectedLabelCarrier" ng-options="carrier.id as carrier.text for carrier in ssc.carriers track by carrier.id" ng-change='ssc.changeShippingCarrier()'>
  	    <option value="">-- Select a carrier --</option>
	  </select>
	  <div class="form-alert" ng-messages="shippingLabelEdit.carrier.$error" ng-show="shippingLabelEdit.carrier.$touched && shippingLabelEdit.carrier.$error">
  	    <div ng-message="required" class="smaller text-danger"><i class="fa fa-fw fa-exclamation-triangle"></i> Carrier required.</div>
	  </div>
	</div>
	<div class="form-group">
	  <label for="packageOption" class="control-label small">Package Option</label>
	  <select name="packageOption" class="form-control input-sm" ng-required="true" ng-model="ssc.selectedLabelTemplate" ng-options="template.id as template.text for template in ssc.parcel_templates | filter:{carrier:ssc.selectedLabelCarrier}" ng-change="ssc.changeShippingTemplate(ssc.selectedLabelTemplate)">
	  </select>
	  <div class="form-alert" ng-messages="shippingLabelEdit.packageOption.$error" ng-show="shippingLabelEdit.packageOption.$touched && shippingLabelEdit.packageOption.$error">
  	    <div ng-message="required" class="smaller text-danger"><i class="fa fa-fw fa-exclamation-triangle"></i> Package Option required.</div>
	  </div>
	</div>
	<fieldset>
	  <legend  ng-show="false">Package Details</legend>
	  <div class="form-group"  ng-show="false">
	    <label for="packageOption" class="control-label small">Distance Unit</label>
	    <select name="distanceUnit" class="form-control input-sm" ng-disabled="ssc.selectedLabelTemplate" ng-model="ssc.shippingLabel.distance_unit" ng-change="ssc.changeDistanceUnit(shipppingLabel.distance_unit)">
	      <option value="">N/A</option>
	      <option value="cm">Centimeters</option>
	      <option value="in">Inches</option>
	      <option value="ft">Feet</option>
	      <option value="mm">Millimeters</option>
	      <option value="m">Meters</option>
	      <option value="yd">Yards</option>
	    </select>
	  </div>
	  <div class="form-group" ng-show="false">
  	    <label for="" class="control-label small">Dimensions <span class="text-muted">(L &times; W &times; H)</span></label>
  	    <div class="row tighter">
  	      <div class="col-xs-4">
  		<input name="dimensionLength" type="number" class="form-control input-sm" placeholder="L" ng-disabled="ssc.selectedLabelTemplate" ng-model="ssc.shippingLabel.length" ng-minlength="1" ng-maxlength="6" cordova-keyboard />
  	      </div>
  	      <div class="col-xs-8">
  		<input name="dimensionWidth" type="number" class="form-control input-sm" placeholder="W" ng-disabled="ssc.selectedLabelTemplate" ng-model="ssc.shippingLabel.width" ng-minlength="1" ng-maxlength="6" cordova-keyboard />
  	      </div>
  	      <div class="col-xs-12">
  		<input name="dimensionHeight" type="number" class="form-control input-sm" placeholder="H" ng-disabled="ssc.selectedLabelTemplate" ng-model="ssc.shippingLabel.height" ng-minlength="1" ng-maxlength="6" cordova-keyboardv />
  	      </div>
  	    </div>
	  </div>
	  <div class="form-group" ng-show="false">
  	    <label for="" class="control-label small">Weight</label>
  	    <div class="row tighter">
  	      <div class="col-xs-9">
  		<input name="weightValue" type="number" class="form-control input-sm" ng-disabled="ssc.selectedLabelTemplate" ng-model="ssc.shippingLabel.weight" ng-minlength="1" ng-maxlength="6" cordova-keyboard />
  	      </div>
  	      <div class="col-xs-3">
  		<select name="weightUnit" class="form-control input-sm" ng-disabled="ssc.selectedLabelTemplate" ng-model="ssc.shippingLabel.weight_unit" ng-change="ssc.changeWeightUnit(shippingLabel.weight_unit)">
		  <option value="">N/A</option>
      		  <option value="g">Grams</option>
      		  <option value="oz">Ounces</option>
      		  <option value="lb">Pounds</option>
      		  <option value="kg">Kilograms</option>
  		</select>
  	      </div>
  	    </div>
	  </div>
	  <div class="form-group">
	    <label for="insurance" class="control-label small">Insurance</label>
	    <div class="input-group input-group-sm">
              <span class="input-group-addon">$</span>
              <input name="insurance" type="number" class="form-control" ng-model="ssc.shippingLabel.insurance_amount" cordova-keyboard />
	    </div>
	  </div>
	  <div class="form-group">
	    <button class="btn btn-primary btn-sm" value="Get Rates" ng-click="ssc.getRates(ssc.shippingLabel, ssc.sale)">Get Rates</button>
	    <div ng-show="ssc.ratesError" class="alert alert-warning rates small" role="alert">{{ssc.ratesError}}</div>
	  </div>
	</fieldset>
	<fieldset>
	  <legend>Shipping Details</legend>
	  <div class="form-group">
	    <label for="" class="control-label small">Shipping Option</label>
	    <select name="" class="form-control input-sm" ng-model="ssc.selectedShippingOption" ng-options="option.object_id as option.servicelevel.name for option in ssc.shippingOptions" ng-change="ssc.changeShippingOption()">
	      <option value="" ng-selected="">-- select a shipping option --</option>
	    </select>
	  </div>
	  <ul class="list-group">
	    <li class="list-group-item small">
	      <div class="row">
		<div class="col-xs-8">
		  <b>Amount</b>
		</div>
		<div class="col-xs-4 text-right">
		  <span class="text-muted"><span data-ng-bind="ssc.shippingOption.currency"></span><span data-ng-bind="ssc.shippingOption.amount"></span></span>
		</div>
	      </div>
	    </li>
	    <li class="list-group-item small" ng-show="ssc.shippingOption">
	      <div class="row">
		<div class="col-xs-6">
		  <b>Delivery Schedule</b>
		</div>
		<div class="col-xs-6 text-right">
		  <span class="text-muted"><span data-ng-bind="ssc.shippingOption.days"></span> business days</span>
		</div>
	      </div>
	    </li>
	  </ul>
	</fieldset>
	<hr class="spacer">
	<div class="row tighter">
	  <div class="col-xs-6">
	    <button ng-disabled='!ssc.getSelectedShippingOption()' class="btn btn-primary btn-block" value='Add' type='submit' ng-click="ssc.saveShippingLabel(ssc.selectedShippingOption)">Save</button>
	  </div>
	  <div class="col-xs-6">
	    <button class="btn btn-warning btn-block" value="Cancel" ng-click="ssc.cancelShippingLabel()">Cancel</button>
	  </div>
	</div>
      </form>
    </div>
    <button class="btn btn-primary btn-sm" ng-show="ssc.isAddingShipping===false" ng-click="ssc.createShippingLabel()">Add Shipping Label&hellip;</button>
  </div> <!-- End of ng-show of shipping labels -->
  <hr class="spacer">
  <div class="row tighter">
    <div class="col-xs-7">
      <button class="btn btn-link"><i class="fa fa-arrow-left"></i> Back</button>
    </div>
    <div class="col-xs-5">
      <button class="btn btn-info btn-block" ng-show="ssc.shippingLabels.length > 0" ng-click="ssc.goToSummary()">Next <i class="fa fa-arrow-right"></i></button>
    </div>
  </div>
</div>
